/* 移動端視窗修復 */

/* 使用 CSS 自定義屬性來處理動態視窗高度 */
:root {
  --vh: 1vh;
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

/* 主應用容器 */
.mobile-viewport-container {
  height: 100vh; /* 備選方案 */
  height: calc(var(--vh, 1vh) * 100); /* 動態視窗高度 */
  width: 100vw;
  position: relative;
  overflow: hidden;
}

/* 地圖容器 */
.mobile-map-container {
  height: 100vh; /* 備選方案 */
  height: calc(var(--vh, 1vh) * 100); /* 動態視窗高度 */
  width: 100%;
  position: relative;
}

/* Header 安全區域 */
.mobile-header {
  padding-top: var(--safe-area-inset-top);
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

/* 底部按鈕安全區域 */
.mobile-bottom-button {
  bottom: calc(1rem + var(--safe-area-inset-bottom));
  left: 50%;
  transform: translateX(-50%);
}

/* 右下角按鈕安全區域 */
.mobile-bottom-right-button {
  bottom: calc(1rem + var(--safe-area-inset-bottom));
  right: calc(1rem + var(--safe-area-inset-right));
}

/* 統計信息安全區域 */
.mobile-stats-container {
  bottom: calc(5rem + var(--safe-area-inset-bottom));
  right: calc(1rem + var(--safe-area-inset-right));
}

/* iOS Safari 特殊處理 */
@supports (-webkit-touch-callout: none) {
  .mobile-viewport-container {
    height: -webkit-fill-available;
  }
  
  .mobile-map-container {
    height: -webkit-fill-available;
  }
}

/* 防止內容被瀏覽器 UI 遮擋 */
@media screen and (max-height: 700px) {
  .mobile-bottom-button {
    bottom: calc(0.5rem + var(--safe-area-inset-bottom));
  }
  
  .mobile-bottom-right-button {
    bottom: calc(0.5rem + var(--safe-area-inset-bottom));
  }
  
  .mobile-stats-container {
    bottom: calc(4rem + var(--safe-area-inset-bottom));
  }
}

/* 橫屏模式調整 */
@media screen and (orientation: landscape) and (max-height: 500px) {
  .mobile-bottom-button {
    bottom: calc(0.25rem + var(--safe-area-inset-bottom));
  }
  
  .mobile-stats-container {
    bottom: calc(3rem + var(--safe-area-inset-bottom));
    right: calc(0.5rem + var(--safe-area-inset-right));
  }
}